$LOAD_PATH.unshift( "../scribelite/lib" )
require 'scribelite'



ScribeDb.open( './sub100k.db' )


puts
puts "  #{Scribe.count} scribe(s)"
puts "  #{Tx.count} tx(s)"
#=>   100000 scribe(s)
#=>   100000 tx(s)

##  "application/pdf" => 36,
pdf_count = Scribe.pdf.count
pp pdf_count


## export
Scribe.pdf.each do |scribe|
  data, content_type  = DataUri.parse( scribe.tx.data )
  ## double check content type - why? why not?

  puts "==> exporting #{scribe.num}.pdf   #{number_to_human_size(scribe.bytes)} (#{scribe.bytes} bytes) ..."
  write_blob( "./tmp/pdf/#{scribe.num}.pdf", data )
end

=begin
==> exporting 17123.pdf   67.7 KB (69352 bytes) ...
==> exporting 17279.pdf   53.8 KB (55140 bytes) ...
==> exporting 17283.pdf   19.7 KB (20192 bytes) ...
==> exporting 17286.pdf   55.7 KB (57004 bytes) ...
==> exporting 17445.pdf   124 KB (126760 bytes) ...
==> exporting 17454.pdf   127 KB (129744 bytes) ...
==> exporting 17455.pdf   46 KB (47072 bytes) ...
==> exporting 17467.pdf   41.2 KB (42156 bytes) ...
==> exporting 17482.pdf   78.9 KB (80832 bytes) ...
==> exporting 17500.pdf   80.1 KB (82036 bytes) ...
==> exporting 17532.pdf   80.2 KB (82076 bytes) ...
==> exporting 17559.pdf   78.7 KB (80580 bytes) ...
==> exporting 17639.pdf   72.4 KB (74184 bytes) ...
==> exporting 17661.pdf   44 KB (45048 bytes) ...
==> exporting 17671.pdf   115 KB (117756 bytes) ...
==> exporting 17674.pdf   66.3 KB (67896 bytes) ...
==> exporting 17681.pdf   67.3 KB (68952 bytes) ...
==> exporting 17683.pdf   53.6 KB (54936 bytes) ...
==> exporting 17682.pdf   59.7 KB (61168 bytes) ...
==> exporting 17687.pdf   91.3 KB (93540 bytes) ...
==> exporting 17690.pdf   53.7 KB (54988 bytes) ...
==> exporting 17692.pdf   109 KB (112056 bytes) ...
==> exporting 17693.pdf   100 KB (102876 bytes) ...
==> exporting 17696.pdf   77.8 KB (79688 bytes) ...
==> exporting 17703.pdf   63.6 KB (65088 bytes) ...
==> exporting 17704.pdf   75.3 KB (77092 bytes) ...
==> exporting 17705.pdf   62 KB (63488 bytes) ...
==> exporting 17715.pdf   63.3 KB (64792 bytes) ...
==> exporting 17717.pdf   53.1 KB (54408 bytes) ...
==> exporting 17716.pdf   100 KB (102700 bytes) ...
==> exporting 17721.pdf   71.4 KB (73108 bytes) ...
==> exporting 17722.pdf   72.9 KB (74692 bytes) ...
==> exporting 17723.pdf   52.1 KB (53312 bytes) ...
==> exporting 17724.pdf   48.2 KB (49392 bytes) ...
==> exporting 17726.pdf   75.5 KB (77344 bytes) ...
==> exporting 17747.pdf   23.5 KB (24108 bytes) ...
=end


puts "bye"

